<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIè¥é”€æ–¹æ¡ˆä¼˜åŒ– Co-pilot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #0a0a1a; --bg-panel: #1a1a2e; --bg-card: #23233a;
            --primary-color: #00f2ea; --secondary-color: #ffc72c; --accent-color: #f900ff;
            --text-primary: #e0e0e0; --text-secondary: #a0a0c0; --border-color: #3a3a5a;
            --shadow: 0 10px 40px rgba(0, 242, 234, 0.1); --radius: 16px;
        }
        body { margin: 0; font-family: 'Noto Sans SC', sans-serif; background-color: var(--bg-main); color: var(--text-primary); overflow: hidden; }
        .page-container { display: flex; flex-direction: column; align-items: center; height: 100vh; }
        .input-wrapper, .result-wrapper { width: 100%; transition: opacity 0.8s ease-out, transform 0.8s ease-out; }
        .input-wrapper { display: flex; justify-content: center; align-items: center; flex-grow: 1; }
        .result-wrapper { display: none; max-width: 1440px; padding: 30px; height: 100vh; box-sizing: border-box; }
        .result-layout { display: flex; gap: 30px; height: 100%; }
        .main-content { flex-grow: 1; overflow-y: auto; padding-right: 15px; }
        .copilot-panel { width: 400px; flex-shrink: 0; background: var(--bg-panel); border-radius: var(--radius); display: flex; flex-direction: column; height: 100%; }
        
        /* æ»šåŠ¨æ¡æ ·å¼ */
        .main-content::-webkit-scrollbar, .copilot-messages::-webkit-scrollbar { width: 6px; }
        .main-content::-webkit-scrollbar-track, .copilot-messages::-webkit-scrollbar-track { background: transparent; }
        .main-content::-webkit-scrollbar-thumb, .copilot-messages::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 3px; }
        
        /* è¾“å…¥åŒº */
        .input-section { text-align: center; padding: 40px; animation: fadeIn 1s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .input-section h1 { font-size: 42px; margin: 0 0 10px; background: linear-gradient(90deg, var(--primary-color), var(--accent-color)); -webkit-background-clip: text; color: transparent; }
        .input-section .slogan { font-size: 18px; color: var(--text-secondary); margin-bottom: 40px; }
        .prompt-input-wrapper { position: relative; width: 700px; margin: 0 auto; }
        .prompt-input { width: 100%; padding: 20px 200px 20px 30px; font-size: 16px; border: 1px solid var(--border-color); border-radius: 50px; box-sizing: border-box; background: var(--bg-panel); color: var(--text-primary); }
        .generate-btn { position: absolute; right: 10px; top: 10px; bottom: 10px; background: linear-gradient(45deg, var(--primary-color), var(--accent-color)); color: #0a0a1a; border: none; padding: 0 35px; border-radius: 40px; font-size: 16px; font-weight: 700; cursor: pointer; }
        
        /* AIæ€è€ƒè¿‡ç¨‹ (ç¥ç»å…ƒåŠ¨ç”») */
        .thinking-canvas-wrapper { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(10, 10, 26, 0.9); z-index: 1000; backdrop-filter: blur(5px); }
        .thinking-canvas-wrapper.active { display: block; }
        #thinking-canvas { position: absolute; top: 0; left: 0; }
        .thinking-text { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px; text-shadow: 0 0 15px var(--primary-color); }
        
        /* ç»“æœä¸äº¤äº’åŒº */
        .card { background: var(--bg-card); border-radius: var(--radius); padding: 25px; margin-bottom: 30px; border: 1px solid var(--border-color); position: relative; overflow: hidden; transition: all 0.5s ease-out; }
        .card-title { font-size: 18px; font-weight: 700; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; color: var(--primary-color); }
        .text-preview { background: var(--bg-panel); border-left: 3px solid var(--primary-color); padding: 15px; border-radius: 8px; font-size: 14px; line-height: 1.8; margin-bottom: 20px; }
        .text-preview strong { color: var(--primary-color); display: block; margin-bottom: 8px;}
        .text-preview p { margin: 0; color: var(--text-secondary); }
        
        /* å¯è§†åŒ–ä¿®æ”¹æ•ˆæœ */
        .data-flow-line { position: absolute; top: 50%; right: 100%; width: 30px; height: 2px; background: linear-gradient(90deg, transparent, var(--primary-color)); transform-origin: right; animation: flow 0.8s ease-out forwards; opacity: 0; }
        @keyframes flow { 0% { transform: scaleX(0); opacity: 0.5; } 100% { transform: scaleX(1); opacity: 0; } }
        .reconstructing-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(90deg, transparent, rgba(0, 242, 234, 0.3), transparent); animation: scan 0.8s ease-out forwards; pointer-events: none; }
        @keyframes scan { from { transform: translateX(-100%); } to { transform: translateX(100%); } }

        /* Co-pilot é¢æ¿ */
        .copilot-header { padding: 20px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; text-align: center; }
        .copilot-messages { flex-grow: 1; padding: 20px; overflow-y: auto; }
        .copilot-message { display: flex; gap: 15px; margin-bottom: 20px; animation: popIn 0.5s ease-out; }
        @keyframes popIn { from { transform: translateY(10px) scale(0.98); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }
        .copilot-message.user { justify-content: flex-end; }
        .copilot-message .avatar { width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0; background-color: var(--bg-main); overflow: hidden; }
        .copilot-message.user .avatar { display: none; }
        .copilot-message .bubble { max-width: 280px; padding: 12px 18px; border-radius: var(--radius); line-height: 1.7; font-size: 14px; }
        .copilot-message.user .bubble { background: #3a3a5a; border-bottom-right-radius: 4px; }
        .copilot-message.bot .bubble { background: var(--bg-main); border-bottom-left-radius: 4px; }
        
        /* AIè¾“å…¥ä¸­... æ•ˆæœ */
        .typing-indicator .bubble { display: flex; align-items: center; gap: 5px; padding: 15px 18px; }
        .typing-indicator span { width: 8px; height: 8px; border-radius: 50%; background-color: var(--text-secondary); animation: bounce 1.2s infinite ease-in-out; }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        .copilot-input-area { padding: 20px; border-top: 1px solid var(--border-color); flex-shrink: 0; }
        .copilot-input { width: 100%; background: var(--bg-main); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-primary); padding: 12px; box-sizing: border-box; }
        ul { padding-left: 20px; margin: 0; } li { margin-bottom: 10px; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="page-container">
        <!-- ===== è¾“å…¥ä¸æ€è€ƒåŒº ===== -->
        <div id="input-wrapper" class="input-wrapper">
            <section id="input-section" class="input-section">
                <h1>åˆ›ä¸–çºª Â· AIè¥é”€å¼•æ“</h1>
                <p class="slogan">è¾“å…¥ä¸€ä¸ªæƒ³æ³•ï¼Œæ”¶è·ä¸€ä¸ªå®‡å®™ã€‚æ‚¨ï¼Œåªéœ€å®šä¹‰æœªæ¥ã€‚</p>
                <div class="prompt-input-wrapper">
                    <input type="text" id="prompt-input" class="prompt-input" value="å¸®æˆ‘ç­–åˆ’ä¸€ä¸ªé’ˆå¯¹åå—åœ°åŒºã€ä¸ºæœŸä¸€å‘¨çš„æ‰«ç æŠ½å¥–æ´»åŠ¨ï¼Œé¢„ç®—äº”ä¸‡ï¼Œä¸»æ‰“æ–°å“Aã€‚">
                    <button id="generate-btn" class="generate-btn">å¯åŠ¨åˆ›ä¸–çºª</button>
                </div>
            </section>
        </div>
        <div id="thinking-canvas-wrapper" class="thinking-canvas-wrapper">
            <canvas id="thinking-canvas"></canvas>
            <div id="thinking-text" class="thinking-text">æ­£åœ¨æ„å»ºè¥é”€å®‡å®™...</div>
        </div>

        <!-- ===== ç»“æœä¸äº¤äº’åŒº ===== -->
        <div id="result-wrapper" class="result-wrapper">
            <div class="result-layout">
                <div class="main-content">
                    <div class="result-header"><h2>åå—åœ°åŒºæ–°å“æ‰«ç æŠ½å¥–æ´»åŠ¨æ–¹æ¡ˆ</h2></div>
                    <div id="rules-card" class="card"><div class="card-title">ğŸ“œ æ´»åŠ¨è§„åˆ™</div><ul id="rules-list"></ul></div>
                    <div class="grid-container" style="grid-template-columns: 1fr 1fr; align-items: start;">
                        <div id="prizes-card" class="card"><div class="card-title">ğŸ å¥–å“è®¾ç½®</div><div id="prizes-list"></div></div>
                        <div id="budget-card" class="card"><div class="card-title">ğŸ’° é¢„ç®—åˆ†è§£</div><div id="budget-list"></div></div>
                    </div>
                    <div id="text-card" class="card"><div class="card-title">âœï¸ æ¨å¹¿æ–‡æ¡ˆ (AIç”Ÿæˆ)</div><div id="text-preview"></div></div>
                </div>
                <aside class="copilot-panel">
                    <div class="copilot-header"><h3>æ–¹æ¡ˆä¼˜åŒ– Co-pilot</h3></div>
                    <div id="copilot-messages" class="copilot-messages"></div>
                    <div class="copilot-input-area"><input type="text" id="copilot-input" class="copilot-input" placeholder="è¾“å…¥æ‚¨çš„ä¼˜åŒ–æŒ‡ä»¤..."></div>
                </aside>
            </div>
        </div>
    </div>

<script>
    // --- DOM Elements & State ---
    const generateBtn = document.getElementById('generate-btn');
    const inputWrapper = document.getElementById('input-wrapper');
    const resultWrapper = document.getElementById('result-wrapper');
    const thinkingCanvasWrapper = document.getElementById('thinking-canvas-wrapper');
    const copilotInput = document.getElementById('copilot-input');
    const copilotMessages = document.getElementById('copilot-messages');
    let campaignData = {};

    // --- [FIXED] åµŒå…¥Base64ç¼–ç çš„AIå¤´åƒï¼Œç¡®ä¿100%æ˜¾ç¤º ---
    const AI_AVATAR_BASE64 = "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+PGc+PHBhdGggZD0iTTEyIDJBNiA2IDAgMDA2IDh2M2EyIDIgMCAwMC0yIDJ2M2E2IDYgMCAwMDEyIDBWMTNhMiAyIDAgMDAtMi0yVjhBNiA2IDAgMDAxMiAyem0wIDJhNCA0IDAgMDE0IDR2M2ExIDEgMCAwMS0xIDFoLTYhMSAxIDAgMDEtMS0xVjhBNC40MjQgNC40MjQgMCAwMTEyIDR6IiBmaWxsPSIjMDBmMmVhIi8+PC9nPjwvc3ZnPg==";

    // --- Data Initialization ---
    function resetCampaignData() {
        campaignData = {
            rules: `<li><strong>æ´»åŠ¨æ—¶é—´ï¼š</strong>2024å¹´8æœˆ1æ—¥ - 2024å¹´8æœˆ7æ—¥ (ä¸ºæœŸä¸€å‘¨)</li><li><strong>æ´»åŠ¨åŒºåŸŸï¼š</strong>åå—åœ°åŒº (å¹¿ä¸œã€å¹¿è¥¿ã€æµ·å—)</li><li><strong>å‚ä¸æ–¹å¼ï¼š</strong>è´­ä¹°â€œæ–°å“Aâ€æ‰«ç å‚ä¸ï¼Œæ¯äººæ¯æ—¥æœ€å¤š3æ¬¡ã€‚</li>`,
            prizes: `<div class="prize-item">ğŸ¥‡Â <strong>ä¸€ç­‰å¥–ï¼š</strong>å“ç‰Œå®šåˆ¶æ—…è¡Œç®± (10ä»½)</div><div class="prize-item">ğŸ¥ˆÂ <strong>äºŒç­‰å¥–ï¼š</strong>æ–°å“Aä¸€æ (100ä»½)</div><div class="prize-item">ğŸ¥‰Â <strong>ä¸‰ç­‰å¥–ï¼š</strong>1.88å…ƒç°é‡‘çº¢åŒ…</div>`,
            budget: { prize1: 5000, prize2: 6000, prize3: 37500 },
            // --- [ENHANCED] æ›´ä¸°å¯Œçš„æ¨å¹¿æ–‡æ¡ˆ ---
            text: `
                <div class="text-preview">
                    <strong>ä¸»è§†è§‰/æµ·æŠ¥æ ‡é¢˜</strong>
                    <p>ä¸€ç“¶å¼€å¯ï¼Œå¤§å¥–é™ä¸´ï¼ã€Œæ–°å“Aã€å¸­å·åå—ï¼Œæ‰«ç èµ¢ä¸‡å…ƒè±ªç¤¼ï¼</p>
                </div>
                <div class="text-preview">
                    <strong>ç¤¾äº¤åª’ä½“ç§è‰æ–‡æ¡ˆ (å°çº¢ä¹¦/æœ‹å‹åœˆ)</strong>
                    <p>ğŸ”¥åå—çš„å§å¦¹ä»¬ï¼ŒæŒ–åˆ°å®äº†ï¼SipAIçš„ã€Œæ–°å“Aã€ä¸ä»…å¥½å–åˆ°çˆ†ï¼Œç“¶ç›–é‡Œè¿˜è—ç€ç§˜å¯†ï¼ğŸ<br>
                    éšæ‰‹ä¸€æ‰«ï¼Œæˆ‘ç«Ÿç„¶ä¸­äº†ç°é‡‘çº¢åŒ…ï¼å¬è¯´è¿˜æœ‰äººèµ¢äº†è¶…é…·çš„å®šåˆ¶æ—…è¡Œç®±âœˆï¸ï¼Œ100%æœ‰å¥–å“¦ï¼èµ¶ç´§å»æ¥¼ä¸‹ä¾¿åˆ©åº—è¯•è¯•æ‰‹æ°”ï¼<br>
                    #SipAIæ–°å“A #æ‰«ç èµ¢å¤§å¥– #ç¥ä»™è¿æ°” #å¤æ—¥é¥®å“</p>
                </div>
                <div class="text-preview">
                    <strong>å®˜æ–¹/çŸ­ä¿¡æ¨é€æ–‡æ¡ˆ</strong>
                    <p>å°Šæ•¬çš„ç”¨æˆ·ï¼Œä¸ºåº†ç¥â€œæ–°å“Aâ€åœ¨åå—åœ°åŒºä¸Šå¸‚ï¼ŒSipAIç‰¹æ¨å‡ºâ€œç ä¸Šèµ¢å¤§å¥–â€æ´»åŠ¨ã€‚å³æ—¥èµ·è‡³8æœˆ7æ—¥ï¼Œå‡¡è´­ä¹°æ–°å“Aå¹¶æ‰«æç“¶ç›–å†…äºŒç»´ç ï¼Œå³æœ‰æœºä¼šèµ¢å–å“ç‰Œå®šåˆ¶æ—…è¡Œç®±ã€æ•´ç®±èµ é¥®åŠç°é‡‘çº¢åŒ…ç­‰å¤šé‡å¥½ç¤¼ã€‚è¯¦æƒ…è¯·è§æ´»åŠ¨é¡µé¢ã€‚SipAIæœŸå¾…æ‚¨çš„å‚ä¸ï¼</p>
                </div>
            `
        };
    }

    // --- Canvas Animation ---
    const canvas = document.getElementById('thinking-canvas');
    const ctx = canvas.getContext('2d');
    let particles = [];
    function setupCanvas() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        particles = Array.from({ length: 100 }, () => ({
            x: Math.random() * canvas.width, y: Math.random() * canvas.height,
            vx: (Math.random() - 0.5) * 0.5, vy: (Math.random() - 0.5) * 0.5, size: Math.random() * 2 + 1,
        }));
    }
    function animateCanvas() {
        if (!thinkingCanvasWrapper.classList.contains('active')) return;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles.forEach((p, i) => {
            p.x += p.vx; p.y += p.vy;
            if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
            if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
            ctx.fillStyle = 'rgba(0, 242, 234, 0.8)';
            ctx.beginPath(); ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2); ctx.fill();
            for (let j = i + 1; j < particles.length; j++) {
                if (Math.hypot(p.x - particles[j].x, p.y - particles[j].y) < 150) {
                    ctx.strokeStyle = `rgba(0, 242, 234, ${1 - Math.hypot(p.x - particles[j].x, p.y - particles[j].y) / 150})`;
                    ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                }
            }
        });
        requestAnimationFrame(animateCanvas);
    }
    
    // --- Main Flow ---
    generateBtn.addEventListener('click', () => {
        inputWrapper.style.opacity = '0'; inputWrapper.style.transform = 'scale(0.9)';
        setTimeout(() => {
            inputWrapper.style.display = 'none'; thinkingCanvasWrapper.classList.add('active');
            setupCanvas(); animateCanvas();
            setTimeout(() => {
                thinkingCanvasWrapper.classList.remove('active');
                resetCampaignData(); renderAll(); resultWrapper.style.display = 'block';
                addCopilotMessage("åˆ›ä¸–çºªå¼•æ“å·²ä¸ºæ‚¨æ„å»ºåˆå§‹æ–¹æ¡ˆï¼æ‚¨å¯ä»¥é€šè¿‡å¯¹è¯æ¥ä¼˜åŒ–æ¯ä¸€ä¸ªç»†èŠ‚ã€‚", "bot");
            }, 3000);
        }, 800);
    });

    // --- Co-pilot Interaction (Upgraded) ---
    copilotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && e.target.value.trim()) {
            const userInput = e.target.value.trim();
            addCopilotMessage(userInput, 'user'); e.target.value = '';
            processUserInstruction(userInput);
        }
    });

    function addCopilotMessage(text, type) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `copilot-message ${type}`;
        let avatarHtml = type === 'bot' ? `<div class="avatar"><img src="${AI_AVATAR_BASE64}" alt="AI Avatar"></div>` : '';
        msgDiv.innerHTML = `${avatarHtml}<div class="bubble">${text}</div>`;
        copilotMessages.appendChild(msgDiv);
        copilotMessages.scrollTop = copilotMessages.scrollHeight;
    }

    function showTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'copilot-message bot typing-indicator';
        typingDiv.innerHTML = `<div class="avatar"><img src="${AI_AVATAR_BASE64}" alt="AI Avatar"></div><div class="bubble"><span></span><span></span><span></span></div>`;
        copilotMessages.appendChild(typingDiv);
        copilotMessages.scrollTop = copilotMessages.scrollHeight;
        return typingDiv;
    }
    
    function processUserInstruction(instruction) {
        const typingIndicator = showTypingIndicator();
        setTimeout(() => {
            copilotMessages.removeChild(typingIndicator);
            let response = "æ­£åœ¨æ›´æ–°æ–¹æ¡ˆ..."; let cardToAnimate = [];

            if (instruction.includes('ä¸€ç­‰å¥–') && instruction.includes('æ‰‹æœº')) {
                updatePrize(1, 'æœ€æ–°æ¬¾æ——èˆ°æ‰‹æœº (2éƒ¨)', 16000);
                response = "éµå‘½ã€‚å·²å°†ä¸€ç­‰å¥–å‡çº§ä¸ºæœ€æ–°æ¬¾æ——èˆ°æ‰‹æœºï¼Œå¹¶åŒæ­¥é‡ç®—äº†é¢„ç®—ã€‚";
                cardToAnimate = ['prizes-card', 'budget-card'];
            } else if (instruction.includes('æ—¶é—´') && instruction.includes('å»¶é•¿')) {
                updateRule('æ´»åŠ¨æ—¶é—´', '2024å¹´8æœˆ1æ—¥ - 2024å¹´8æœˆ14æ—¥ (å»¶é•¿è‡³ä¸¤å‘¨)');
                response = "æ´»åŠ¨å‘¨æœŸå·²å»¶é•¿ã€‚è¯·æ³¨æ„ï¼Œè¿™å¯èƒ½ä¼šå¢åŠ çº¢åŒ…é¢„ç®—ã€‚";
                cardToAnimate = ['rules-card'];
            } else if (instruction.includes('æ–‡æ¡ˆ') && instruction.includes('æ´»æ³¼')) {
                updateText(); response = "æ–‡æ¡ˆå·²æ³¨å…¥æ›´å¤šå¹´è½»æ´»åŠ›ï¼";
                cardToAnimate = ['text-card'];
            } else {
                response = "æŒ‡ä»¤è§£æå®Œæ¯•ï¼Œä½†æœªèƒ½åŒ¹é…åˆ°å¯æ‰§è¡Œæ“ä½œã€‚è¯·å°è¯•æ›´æ˜ç¡®çš„æŒ‡ä»¤ã€‚";
            }
            
            cardToAnimate.forEach(id => applyVisualFeedback(id));
            addCopilotMessage(response, 'bot');
        }, 1500 + Math.random() * 1000);
    }

    // --- Rendering and Visual Feedback ---
    function renderAll() {
        document.getElementById('rules-list').innerHTML = campaignData.rules;
        document.getElementById('prizes-list').innerHTML = campaignData.prizes;
        document.getElementById('text-preview').innerHTML = campaignData.text;
        renderBudget();
    }
    function renderBudget() {
        const total = Object.values(campaignData.budget).reduce((a, b) => a + b, 0);
        document.getElementById('budget-list').innerHTML = `<div class="budget-item"><span>ä¸€ç­‰å¥–æˆæœ¬</span><strong>Â¥${campaignData.budget.prize1.toLocaleString()}</strong></div><div class="budget-item"><span>äºŒç­‰å¥–æˆæœ¬</span><strong>Â¥${campaignData.budget.prize2.toLocaleString()}</strong></div><div class="budget-item"><span>ä¸‰ç­‰å¥–çº¢åŒ…æ± </span><strong>Â¥${campaignData.budget.prize3.toLocaleString()}</strong></div><div class="budget-item" style="border-top:1px solid var(--border-color); padding-top:15px; margin-top:10px;"><span>æ€»è®¡</span><strong>Â¥${total.toLocaleString()}</strong></div>`;
    }

    function applyVisualFeedback(cardId) {
        const card = document.getElementById(cardId);
        const dataLine = document.createElement('div');
        dataLine.className = 'data-flow-line';
        card.appendChild(dataLine);
        const overlay = document.createElement('div');
        overlay.className = 'reconstructing-overlay';
        card.appendChild(overlay);
        setTimeout(() => {
            if (card.contains(dataLine)) card.removeChild(dataLine);
            if (card.contains(overlay)) card.removeChild(overlay);
        }, 800);
    }
    
    // --- Update Functions ---
    function updatePrize(level, newText, newCost) {
        campaignData.prizes = campaignData.prizes.replace(/ğŸ¥‡Â <strong>ä¸€ç­‰å¥–ï¼š<\/strong>(.*?)<\/div>/, level === 1 ? `ğŸ¥‡Â <strong>ä¸€ç­‰å¥–ï¼š</strong>${newText}</div>` : '$&');
        campaignData.budget.prize1 = newCost;
        renderAll();
    }
    function updateRule(ruleName, newText) {
        campaignData.rules = campaignData.rules.replace(new RegExp(`(<strong>${ruleName}ï¼š<\/strong>)(.*?)(<\/li>)`), `$1${newText}$3`);
        renderAll();
    }
    function updateText() {
        // æ›´æ–°æ–‡æ¡ˆå¯ä»¥åªæ˜¯ä¸€ä¸ªè±¡å¾ï¼Œå› ä¸ºå®é™…çš„æ–‡æ¡ˆå¾ˆå¤š
        // è¿™é‡Œæˆ‘ä»¬åªæ›´æ–°ä¸€ä¸ªæ ‡é¢˜ä½œä¸ºè§†è§‰åé¦ˆ
        campaignData.text = campaignData.text.replace(/ä¸€ç“¶å¼€å¯ï¼Œå¤§å¥–é™ä¸´ï¼/, `ç©çœŸçš„ï¼æ‰«ç å°±çˆ†å¥–ï¼Œæ‰‹æœºå¤§å¥–ç­‰ä½ æ‰›ï¼`);
        renderAll();
    }
</script>
</body>
</html>
