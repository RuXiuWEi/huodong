<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SipAI è¥é”€æ´»åŠ¨é­”æ³•å¸ˆ v2.0</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-main: #f4f7f9; --primary-color: #007bff; --secondary-color: #6c757d;
            --success-color: #28a745; --warning-color: #ffc107; --text-primary: #212529;
            --text-secondary: #6c757d; --card-bg: #ffffff; --border-color: #dee2e6;
            --shadow: 0 4px 25px rgba(0, 0, 0, 0.08); --radius: 12px;
        }
        body { margin: 0; font-family: 'Noto Sans SC', sans-serif; background-color: var(--bg-main); color: var(--text-primary); }
        
        /* --- æ•´ä½“å¸ƒå±€ --- */
        .page-container { display: flex; flex-direction: column; align-items: center; min-height: 100vh; }
        .input-wrapper { width: 100%; max-width: 960px; margin: 40px auto; padding: 0 20px; }
        .result-wrapper { display: none; width: 100%; max-width: 1360px; padding: 20px; flex-grow: 1; box-sizing: border-box; }
        .result-layout { display: flex; gap: 30px; }
        .main-content { flex-grow: 1; }
        .copilot-panel { width: 380px; flex-shrink: 0; background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); display: flex; flex-direction: column; height: fit-content; position: sticky; top: 20px; }

        /* --- è¾“å…¥ä¸æ€è€ƒåŒº --- */
        .input-section { background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); padding: 40px; text-align: center; }
        .thinking-section { display: none; text-align: center; padding: 40px 0; }
        .thinking-steps { display: flex; justify-content: center; gap: 20px; margin-top: 30px; flex-wrap: wrap; }
        .step { background: var(--card-bg); padding: 20px; border-radius: var(--radius); box-shadow: var(--shadow); width: 200px; opacity: 0; transform: translateY(20px); animation: popIn 0.5s forwards; }
        /* çœç•¥éƒ¨åˆ†ä¸v1ç›¸åŒçš„CSS... */
        .input-section h1 { font-size: 28px; margin: 0 0 10px; }
        .input-section .slogan { font-size: 16px; color: var(--text-secondary); margin-bottom: 30px; }
        .prompt-input-wrapper { position: relative; }
        .prompt-input { width: 100%; padding: 18px 120px 18px 20px; font-size: 16px; border: 1px solid var(--border-color); border-radius: 30px; box-sizing: border-box; }
        .generate-btn { position: absolute; right: 8px; top: 8px; bottom: 8px; background: linear-gradient(45deg, #007bff, #0056b3); color: white; border: none; padding: 0 30px; border-radius: 25px; font-size: 16px; font-weight: 700; cursor: pointer; }
        .step .icon { font-size: 24px; margin-bottom: 10px; }
        .step .title { font-weight: 500; }
        .step .status { font-size: 14px; margin-top: 10px; font-weight: 700; }
        .status.done { color: var(--success-color); }
        @keyframes popIn { to { opacity: 1; transform: translateY(0); } }

        /* --- ç»“æœå±•ç¤ºåŒº --- */
        .result-header { text-align: center; margin-bottom: 30px; }
        .card { background: var(--card-bg); border-radius: var(--radius); box-shadow: var(--shadow); padding: 25px; margin-bottom: 30px; transition: all 0.5s ease-out; }
        .card.highlight { transform: scale(1.02); box-shadow: 0 8px 40px rgba(0, 123, 255, 0.2); }
        .card-title { font-size: 18px; font-weight: 700; border-bottom: 1px solid var(--border-color); padding-bottom: 15px; margin-bottom: 20px; display: flex; align-items: center; }
        .card-title .icon { margin-right: 10px; font-size: 20px; }
        .prize-item, .budget-item { display: flex; align-items: center; margin-bottom: 15px; }
        
        /* --- Co-pilot é¢æ¿ --- */
        .copilot-header { padding: 20px; border-bottom: 1px solid var(--border-color); }
        .copilot-header h3 { margin: 0; text-align: center; font-size: 18px; }
        .copilot-messages { height: 400px; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 20px; }
        .copilot-message { max-width: 95%; line-height: 1.7; font-size: 14px; padding: 12px 18px; border-radius: var(--radius); }
        .copilot-message.user { background: #e9ecef; align-self: flex-end; }
        .copilot-message.bot { background: transparent; align-self: flex-start; }
        .copilot-input-area { padding: 20px; border-top: 1px solid var(--border-color); }
        .copilot-input { width: 100%; padding: 12px; font-size: 14px; border: 1px solid var(--border-color); border-radius: 8px; box-sizing: border-box; }
        
        /* å…¶ä»–æ ·å¼ */
        ul { padding-left: 20px; margin: 0; } li { margin-bottom: 10px; line-height: 1.6; }
        .text-preview { background: #f8f9fa; border: 1px solid var(--border-color); padding: 15px; border-radius: 8px; }
    </style>
</head>
<body>

    <div class="page-container">
        <!-- ===== 1. è¾“å…¥ä¸æ€è€ƒåŒº ===== -->
        <div id="initial-wrapper" class="input-wrapper">
            <section id="input-section" class="input-section">
                <h1>è¥é”€æ´»åŠ¨é­”æ³•å¸ˆ</h1>
                <p class="slogan">åªéœ€ä¸€å¥è¯ï¼ŒAIä¸ºæ‚¨ç­–åˆ’ä¸€åœºç²¾å½©çš„è¥é”€æ´»åŠ¨ã€‚æ‚¨ï¼Œåªéœ€æ‹æ¿ã€‚</p>
                <div class="prompt-input-wrapper">
                    <input type="text" id="prompt-input" class="prompt-input" value="å¸®æˆ‘ç­–åˆ’ä¸€ä¸ªé’ˆå¯¹åå—åœ°åŒºã€ä¸ºæœŸä¸€å‘¨çš„æ‰«ç æŠ½å¥–æ´»åŠ¨ï¼Œé¢„ç®—äº”ä¸‡ï¼Œä¸»æ‰“æ–°å“Aã€‚">
                    <button id="generate-btn" class="generate-btn">ä¸€é”®ç”Ÿæˆ</button>
                </div>
            </section>
            <section id="thinking-section" class="thinking-section">
                <h2>AIæ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆæ–¹æ¡ˆ...</h2>
                <div id="thinking-steps" class="thinking-steps"></div>
            </section>
        </div>

        <!-- ===== 2. ç»“æœä¸äº¤äº’åŒº ===== -->
        <div id="result-wrapper" class="result-wrapper">
            <div class="result-layout">
                <!-- å·¦ä¾§ä¸»å†…å®¹ -->
                <div class="main-content">
                    <div class="result-header">
                        <h2>åå—åœ°åŒºæ–°å“æ‰«ç æŠ½å¥–æ´»åŠ¨æ–¹æ¡ˆ</h2>
                        <p class="summary">æ ¹æ®æ‚¨çš„éœ€æ±‚å’Œé¢„ç®—ï¼ŒAIå·²ä¸ºæ‚¨ç”Ÿæˆä»¥ä¸‹å®Œæ•´æ–¹æ¡ˆï¼Œæ‚¨å¯ä»¥é€šè¿‡å³ä¾§çš„AIåŠ©æ‰‹è¿›è¡Œä¿®æ”¹ã€‚</p>
                    </div>
                    
                    <div id="rules-card" class="card">
                        <h3 class="card-title"><span class="icon">ğŸ“œ</span>æ´»åŠ¨è§„åˆ™</h3>
                        <ul id="rules-list">
                            <li><strong>æ´»åŠ¨æ—¶é—´ï¼š</strong>2024å¹´8æœˆ1æ—¥ - 2024å¹´8æœˆ7æ—¥ (ä¸ºæœŸä¸€å‘¨)</li>
                            <li><strong>æ´»åŠ¨åŒºåŸŸï¼š</strong>åå—åœ°åŒº (å¹¿ä¸œã€å¹¿è¥¿ã€æµ·å—)</li>
                            <li><strong>å‚ä¸æ–¹å¼ï¼š</strong>æ´»åŠ¨æœŸé—´ï¼Œè´­ä¹°ä»»æ„å°æœ‰æ´»åŠ¨æ ‡è¯†çš„â€œæ–°å“Aâ€ï¼Œæ‰«æç“¶ç›–å†…äºŒç»´ç å³å¯å‚ä¸æŠ½å¥–ã€‚</li>
                        </ul>
                    </div>
                    
                    <div class="grid-container" style="grid-template-columns: 1fr 1fr; align-items: start;">
                        <div id="prizes-card" class="card">
                            <h3 class="card-title"><span class="icon">ğŸ</span>å¥–å“è®¾ç½®</h3>
                            <div id="prizes-list">
                                <div class="prize-item"><span>ğŸ¥‡</span>Â <strong>ä¸€ç­‰å¥–ï¼š</strong>å“ç‰Œå®šåˆ¶æ—…è¡Œç®± (10ä»½)</div>
                                <div class="prize-item"><span>ğŸ¥ˆ</span>Â <strong>äºŒç­‰å¥–ï¼š</strong>æ–°å“Aä¸€æ (100ä»½)</div>
                                <div class="prize-item"><span>ğŸ¥‰</span>Â <strong>ä¸‰ç­‰å¥–ï¼š</strong>1.88å…ƒç°é‡‘çº¢åŒ…</div>
                            </div>
                        </div>
                        <div id="budget-card" class="card">
                            <h3 class="card-title"><span class="icon">ğŸ’°</span>é¢„ç®—åˆ†è§£</h3>
                            <div id="budget-list">
                                <div class="budget-item"><span>ä¸€ç­‰å¥–æˆæœ¬</span><strong>Â¥5,000</strong></div>
                                <div class="budget-item"><span>äºŒç­‰å¥–æˆæœ¬</span><strong>Â¥6,000</strong></div>
                                <div class="budget-item"><span>ä¸‰ç­‰å¥–çº¢åŒ…æ± </span><strong>Â¥37,500</strong></div>
                                <div class="budget-item"><span>æ€»è®¡</span><strong id="total-budget">Â¥48,500</strong></div>
                            </div>
                        </div>
                    </div>

                    <div id="text-card" class="card">
                        <h3 class="card-title"><span class="icon">âœï¸</span>æ¨å¹¿æ–‡æ¡ˆ (AIç”Ÿæˆ)</h3>
                        <div id="text-preview" class="text-preview"><strong>ã€æ ‡é¢˜ã€‘</strong>ã€Œç ã€ä¸Šå¼€å¥–ï¼Œå³åˆ»ç•…çˆ½ï¼...</div>
                    </div>
                </div>

                <!-- å³ä¾§Co-pilot -->
                <aside class="copilot-panel">
                    <div class="copilot-header"><h3>æ–¹æ¡ˆä¼˜åŒ– Co-pilot</h3></div>
                    <div id="copilot-messages" class="copilot-messages"></div>
                    <div class="copilot-input-area">
                        <input type="text" id="copilot-input" class="copilot-input" placeholder="è¾“å…¥æ‚¨çš„ä¿®æ”¹æŒ‡ä»¤...">
                    </div>
                </aside>
            </div>
        </div>
    </div>

<script>
    // --- DOM Elements ---
    const generateBtn = document.getElementById('generate-btn');
    const initialWrapper = document.getElementById('initial-wrapper');
    const resultWrapper = document.getElementById('result-wrapper');
    const copilotInput = document.getElementById('copilot-input');
    const copilotMessages = document.getElementById('copilot-messages');

    // --- State ---
    let budget = { prize1: 5000, prize2: 6000, prize3: 37500 };

    // --- Initial Generation Flow ---
    generateBtn.addEventListener('click', () => {
        // ... (ä¸v1ç›¸åŒçš„æ€è€ƒè¿‡ç¨‹åŠ¨ç”»ä»£ç ï¼Œæ­¤å¤„çœç•¥ä»¥ä¿æŒç®€æ´) ...
        const thinkingSection = document.getElementById('thinking-section');
        const inputSection = document.getElementById('input-section');
        inputSection.style.display = 'none';
        thinkingSection.style.display = 'block';
        setTimeout(() => {
            initialWrapper.style.display = 'none';
            resultWrapper.style.display = 'block';
            addCopilotMessage("æ–¹æ¡ˆå·²ç”Ÿæˆï¼æ‚¨å¯ä»¥ç›´æ¥åœ¨ä¸‹æ–¹è¾“å…¥æ¡†å‘Šè¯‰æˆ‘éœ€è¦ä¿®æ”¹çš„åœ°æ–¹ï¼Œæ¯”å¦‚ï¼šâ€œæŠŠä¸€ç­‰å¥–æ¢æˆæœ€æ–°æ¬¾æ‰‹æœºâ€", "bot");
        }, 1000); // ç®€åŒ–æ€è€ƒæ—¶é—´
    });

    // --- Co-pilot Interaction ---
    copilotInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && e.target.value.trim()) {
            const userInput = e.target.value.trim();
            addCopilotMessage(userInput, 'user');
            e.target.value = '';
            processUserInstruction(userInput);
        }
    });

    function addCopilotMessage(text, type) {
        const msgDiv = document.createElement('div');
        msgDiv.className = `copilot-message ${type}`;
        msgDiv.textContent = text;
        copilotMessages.appendChild(msgDiv);
        copilotMessages.scrollTop = copilotMessages.scrollHeight;
    }

    function processUserInstruction(instruction) {
        let response = "å¥½çš„ï¼Œæ­£åœ¨å¤„ç†æ‚¨çš„æŒ‡ä»¤...";
        let modified = false;

        // æ¨¡æ‹ŸAIç†è§£å¹¶æ‰§è¡Œä¿®æ”¹
        setTimeout(() => {
            if (instruction.includes('ä¸€ç­‰å¥–') && (instruction.includes('æ‰‹æœº') || instruction.includes('iPhone'))) {
                updatePrize(1, 'æœ€æ–°æ¬¾æ——èˆ°æ‰‹æœº (2éƒ¨)', 16000);
                response = "å·²å°†ä¸€ç­‰å¥–æ›´æ–°ä¸ºâ€œæœ€æ–°æ¬¾æ——èˆ°æ‰‹æœºâ€ï¼Œå¹¶åŒæ­¥è°ƒæ•´äº†é¢„ç®—ã€‚è¿˜æœ‰å…¶ä»–éœ€è¦ä¿®æ”¹çš„å—ï¼Ÿ";
                modified = true;
            } else if (instruction.includes('æ—¶é—´') && instruction.includes('å»¶é•¿')) {
                updateRule('æ´»åŠ¨æ—¶é—´', '2024å¹´8æœˆ1æ—¥ - 2024å¹´8æœˆ14æ—¥ (å»¶é•¿è‡³ä¸¤å‘¨)');
                response = "å¥½çš„ï¼Œå·²å°†æ´»åŠ¨æ—¶é—´å»¶é•¿è‡³ä¸¤å‘¨ã€‚ä¸ºä¿è¯é¢„ç®—å……è¶³ï¼Œå»ºè®®é€‚å½“é™ä½ä¸‰ç­‰å¥–çš„ä¸­å¥–ç‡å“¦ã€‚";
                modified = true;
            } else if (instruction.includes('æ–‡æ¡ˆ') && (instruction.includes('æ´»æ³¼') || instruction.includes('å¹´è½»'))) {
                updateText('<strong>ã€æ ‡é¢˜ã€‘</strong> ç©çœŸçš„ï¼æ‰«ç å°±çˆ†å¥–ï¼Œæ‰‹æœºå¤§å¥–ç­‰ä½ æ‰›ï¼<br><br><strong>ã€æ–‡æ¡ˆã€‘</strong> å˜¿ï¼ŒZä¸–ä»£çš„å¼„æ½®å„¿ï¼åˆ«å†åªæ˜¯å–é¥®æ–™äº†ï¼Œæ¥ç‚¹åˆºæ¿€çš„ï¼SipAIæ–°å“Aï¼Œæ¯ä¸€ç“¶éƒ½æ˜¯ä¸€å¼ é€šå¾€æ¬§çš‡çš„é—¨ç¥¨ï¼æ‰«ç å°±æœ‰æœºä¼šå¸¦èµ°æœ€æ–°æ¬¾æ‰‹æœºï¼Œåšæœ‹å‹åœˆæœ€é“çš„ä»”ï¼#SipAIå°±ç©å¤§çš„');
                response = "æ²¡é—®é¢˜ï¼Œå·²ä¸ºæ‚¨ç”Ÿæˆäº†æ›´æ´»æ³¼ã€æ›´å¹´è½»åŒ–çš„æ¨å¹¿æ–‡æ¡ˆã€‚";
                modified = true;
            } else {
                response = "æŠ±æ­‰ï¼Œæˆ‘æš‚æ—¶è¿˜æ²¡å­¦ä¼šè¿™ä¸ªä¿®æ”¹ã€‚æ‚¨å¯ä»¥è¯•è¯•ä¿®æ”¹å¥–å“ã€æ—¶é—´æˆ–è€…æ–‡æ¡ˆé£æ ¼ã€‚";
            }
            addCopilotMessage(response, 'bot');
        }, 1000);
    }

    // --- Dynamic Update Functions ---
    function highlightCard(cardId) {
        const card = document.getElementById(cardId);
        card.classList.add('highlight');
        setTimeout(() => card.classList.remove('highlight'), 2000);
    }

    function updatePrize(level, newText, newCost) {
        const prizeList = document.getElementById('prizes-list');
        const item = prizeList.children[level - 1];
        if (item) {
            item.innerHTML = `<span>${level===1?'ğŸ¥‡':(level===2?'ğŸ¥ˆ':'ğŸ¥‰')}</span>Â <strong>${level===1?'ä¸€ç­‰å¥–':(level===2?'äºŒç­‰å¥–':'ä¸‰ç­‰å¥–')}ï¼š</strong>${newText}`;
        }
        budget[`prize${level}`] = newCost;
        updateBudget();
        highlightCard('prizes-card');
        highlightCard('budget-card');
    }

    function updateRule(ruleName, newText) {
        const rulesList = document.getElementById('rules-list');
        for (let item of rulesList.children) {
            if (item.textContent.includes(ruleName)) {
                item.innerHTML = `<strong>${ruleName}ï¼š</strong>${newText}`;
                break;
            }
        }
        highlightCard('rules-card');
    }

    function updateText(newHtml) {
        document.getElementById('text-preview').innerHTML = newHtml;
        highlightCard('text-card');
    }

    function updateBudget() {
        const total = Object.values(budget).reduce((sum, val) => sum + val, 0);
        const budgetList = document.getElementById('budget-list');
        budgetList.children[0].children[1].textContent = `Â¥${budget.prize1.toLocaleString()}`;
        document.getElementById('total-budget').textContent = `Â¥${total.toLocaleString()}`;
    }
</script>

</body>
</html>